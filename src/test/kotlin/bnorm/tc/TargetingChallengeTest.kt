package bnorm.tc

import bnorm.toTable
import jdk.nashorn.internal.ir.annotations.Ignore
import org.junit.jupiter.api.AfterEach
import org.junit.jupiter.api.BeforeEach
import org.junit.jupiter.api.Test
import robocode.control.RobocodeEngine
import java.io.File

class TargetingChallengeTest {
    private lateinit var engine: RobocodeEngine

    @BeforeEach
    fun setup() {
        engine = RobocodeEngine(File("build/robocode/download"))
    }

    @AfterEach
    fun cleanup() {
        engine.close()
    }

    @Test
    @Ignore
    fun `targeting challenge 2k7`() {
        val challenge = engine.runTargetChallengeRandomMovement(
            targetBot = "bnorm.JarvisT*",
            sessions = 10
        )
        println(challenge.toTable())

/*
                                                                  Targeting Challenge: Random Movement
─────────────────────────────────────────────────┬───────┬───────────────────────────────────────────────────────────────────────────────────────────────────────────────
                       Bot                       │ Score │ Session 1  Session 2  Session 3  Session 4  Session 5  Session 6  Session 7  Session 8  Session 9  Session 10
────────┬────────────────────────────────────────┼───────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────
        │                  apv.AspidMovement 1.0 │  93.1 │      90.6       92.4       88.9       93.9       92.1       96.8       95.2       93.5       96.0        91.5
        │              dummy.micro.Sparrow 2.5TC │  97.4 │      97.4       97.6       99.9       96.9       98.4       94.5       97.9       95.7       97.9        98.1
        │            kawigi.mini.Fhqwhgads 1.1TC │  97.4 │      91.4       99.0       99.8       94.7       98.1       98.0       97.3       98.6       98.3        99.3
   Easy │                         emp.Yngwie 1.0 │  98.8 │      98.9       99.8      100.0       97.7       97.6       98.3       98.4       99.4       99.9        98.1
        │             kawigi.sbf.FloodMini 1.4TC │  91.5 │      93.0       94.1       95.6       93.3       94.2       80.5       77.0       97.8       95.5        93.9
        ├────────────────────────────────────────┼───────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────
        │                           Easy Average │  95.7 │      94.3       96.6       96.8       95.3       96.1       93.6       93.2       97.0       97.5        96.2
────────┼────────────────────────────────────────┼───────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────
        │                          abc.Tron 2.01 │  89.5 │      93.1       84.0       88.5       89.5       95.7       84.6       87.2       93.6       88.2        90.4
        │                      wiki.etc.HTTC 1.0 │  79.0 │      76.1       81.1       78.2       79.5       75.1       82.2       77.3       79.4       74.7        86.0
        │         wiki.etc.RandomMovementBot 1.0 │  90.4 │      90.0       93.0       96.1       97.6       88.1       90.1       93.3       90.1       87.5        78.7
 Medium │    davidalves.micro.DuelistMicro 2.0TC │  79.3 │      72.1       74.5       83.1       68.0       85.0       85.3       81.7       87.0       80.1        76.6
        │                   gh.GrubbmGrb 1.2.4TC │  82.4 │      78.2       81.3       79.2       85.1       95.7       86.1       85.7       81.3       76.3        75.0
        ├────────────────────────────────────────┼───────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────
        │                         Medium Average │  84.1 │      81.9       82.8       85.0       83.9       87.9       85.6       85.0       86.3       81.4        81.3
────────┼────────────────────────────────────────┼───────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────
        │                    pe.SandboxDT 1.91TC │  93.4 │      97.4       97.8       93.0       88.6       93.8       90.4       95.3       94.5       86.1        97.1
        │                 cx.mini.Cigaret 1.31TC │  73.1 │      70.2       68.1       65.3       71.8       77.6       76.0       78.9       73.5       75.1        74.8
        │                         kc.Fortune 1.0 │  72.8 │      67.9       81.1       69.9       74.9       60.6       75.5       68.1       71.5       82.9        76.0
   Hard │ simonton.micro.WeeklongObsession 1.5TC │  78.6 │      80.4       73.9       85.8       73.1       79.9       77.5       72.6       86.8       74.6        81.1
        │            jam.micro.RaikoMicro 1.44TC │  80.5 │      82.8       85.1       82.5       78.9       75.2       80.9       77.7       79.1       84.3        78.2
        ├────────────────────────────────────────┼───────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────
        │                           Hard Average │  79.7 │      79.7       81.2       79.3       77.5       77.4       80.1       78.5       81.1       80.6        81.4
────────┴────────────────────────────────────────┼───────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────
                                         Average │  86.5 │      85.3       86.9       87.0       85.6       87.1       86.4       85.6       88.1       86.5        86.3
*/
    }
}
